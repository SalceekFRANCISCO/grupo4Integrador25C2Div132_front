<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantalla de productos de la tienda de Star Wars</title>
    <link rel="stylesheet" href="css/styles-general.css">
    <link rel="icon" type="image/png" href="img/logo-tienda.png">
</head>
<body class="body-principal">
    <header class="header">
        <nav class="nav">
            <div class="lista-opciones">
                <a href="login.html">Bienvenida</a>
                <a href="index.html">Principal</a>
                <div>
                    <img src="img/logo-tienda.png" alt="logo.jpg" class="logo-tienda">
                </div>
                <a href="carrito.html">Carrito</a>
                <a href="ticket.html">Ticket</a>
            </div>
        </nav>
    </header>
    <nav>
        <h1 class="texto-lista-productos">Nuestros productos</h1>
        <section class="productos-nav">
            <div class="boton-ordenar">
                <button class="boton-ordenar">Ordenar por Nombre (A-Z)</button>
            </div>
        
            <div class="boton-filtrar">
                <button class="boton-ordenar">Filtrar por</button>
                <button class="boton-ordenar">setso 3</button>
            </div>
       </section>
    </nav>
    
    <script>
        let contenedorProductos = document.getElementById("contenedor-productos");
        const url = "http://localhost:3000/productos"

        async function obtenerProductos() {
            try {
                let respuesta = await fetch(url)
                let data = await respuesta.json();
                console.log(data);
                let productos = data.payload;
                mostrarProductos(productos);
            } catch(error) {
                console.error(error);
            }
                            
        }

        function mostrarProductos(array) {
            console.table(array);
            console.log(array)

            let htmlProducto = "";

            array.forEach(producto => {
                htmlProducto += `
                <div class = "card-producto">
                    <img src="${producto.img_url}" alt="${producto.nombre}">
                    <h5>${producto.nombre}</h5>
                    <p>Id: ${producto.id}</p>
                    <p> $${producto.precio}</p>
                </div>`;
                
            });
        console.log(htmlProducto);
        contenedorProductos.innerHTML = htmlProducto;
        }

        function init() {
            obtenerProductos();
        }

        init();
    </script>
</body>
</html>